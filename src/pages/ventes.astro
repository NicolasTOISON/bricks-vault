---
import MainLayout from '../layouts/MainLayout.astro';
import SaleList from '../components/SaleList.astro';
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const [sales, inventory] = await Promise.all([
  prisma.sale.findMany({
    include: {
      legoSet: true,
    },
  }),
  prisma.inventory.findMany({
    include: {
      legoSet: true,
    },
  }),
]);
---

<MainLayout title="Ventes">
  <div class="container mx-auto px-4 py-8">
    <SaleList sales={sales} inventory={inventory} />
  </div>
</MainLayout> 